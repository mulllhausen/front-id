<?php

if (!defined("processing_dir")) define("processing_dir", $argv[1]);
include_once(processing_dir."/functions.php");
include_once(processing_dir."/css/globals.php");

// todo:
// - login (by loading encrypted private key and entering password)
// - login (by generating new encrypted private key and password)
// - logout
// - save encrypted private key
// - show/update linked sites and their permissions
// - link to security analysis
// - link to developer material (API usage)
?>
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>frontID</title>

        <link rel="stylesheet" href="<? echo qs_link("/css/main.css"); ?>"/>

<?/* link rel="preload" as="image" href="<? echo qs_link("/images/icons.svg"); ?>" */?>
        <link rel="preload" as="script" href="<? echo qs_link("/js/main.js"); ?>"/>

        <meta name="viewport" content="width=device-width, height=device-height initial-scale=1.0, user-scalable=no"/>
        <meta name="description" content="<? echo site_description; ?>"/>
        <meta name="author" content="<? echo author; ?>"/>

        <meta name="theme-color" content="<? echo css_background_color1; ?>"/>
        <meta name="apple-mobile-web-app-capable" content="yes"/>
        <meta name="apple-mobile-web-app-status-bar-style" content="<? echo css_background_color1_name; ?>"/>
        <meta name="msapplication-navbutton-color" content="<? echo css_background_color1; ?>"/>

        <link rel="shortcut icon" href="<? echo qs_link("/images/favicon.ico"); ?>" type="image/x-icon"/>
        <link rel="icon" href="<? echo qs_link("/images/favicon.ico"); ?>" type="image/x-icon"/>
        <link rel="apple-touch-icon" href="<? echo qs_link("/images/apple-touch-icon.png"); ?>" />
        <link rel="apple-touch-icon" sizes="72x72" href="<? echo qs_link("/images/apple-touch-icon-72x72.png"); ?>" />
        <link rel="apple-touch-icon" sizes="114x114" href="<? echo qs_link("/images/apple-touch-icon-114x114.png"); ?>" />
        <!--[if IE]><script>isIE9OrLess = true;</script><![endif]-->
        <script src="<? echo qs_link("/js/main.js"); ?>"></script>
        <script type="application/ld+json"><? echo ld_json(__FILE__, "dashboard"); ?></script>

        <script>
var siteGlobals = {};
        </script>

        <link rel="manifest" href="<? echo qs_link("/js/manifest.json"); ?>" />
    </head>
    <body>
<? include(processing_dir."/html/components/popup_modal.html"); ?>
        <script>
            if (window.hasOwnProperty == null) {
                document.getElementById('fullpagePopupHeading').innerHTML = 'your browser is too old';
                document.getElementById('fullpagePopupDetail').innerHTML = 'sorry, this website cannot run on your browser';
                document.getElementById('fullpagePopupNotification').style.display = 'table';
                nonExistentFunctionThatHaltsJavascript();
            }
        </script>
        <div id="modalHoldings" class="content-for-modals" style="display:none;">
<? include(processing_dir."/html/components/edit_profile_pic.html"); ?>
        </div>
<?/*
    .page has all the content in it. on pc it is a vertical strip down the
    middle. on phone and tablet it is the full page width.
*/?>
        <div class="page">
<? include(processing_dir."/html/components/header.html"); ?>
<? include(processing_dir."/html/components/hexagon_profile_pic.html"); ?>
        </div>
        <script>triggerEvent(document, 'ready');</script>
    </body>
</html>
